class TwitterAPI{API_BASE_URL="./twitter-proxy.php";constructor(){this.termInput=document.querySelector(".search-controls__input"),this.sortButton=document.querySelector(".sort-menu__active"),this.firstSortOpen=!0,this.sortList=document.querySelector(".sort-menu__list"),this.sortText=document.querySelector(".sort-menu__text"),this.countButton=document.querySelector(".count-menu__active"),this.countList=document.querySelector(".count-menu__list"),this.countText=document.querySelector(".count-menu__text"),this.firstCountOpen=!0,this.setupListeners()}setupListeners(){const t=document.querySelector(".search-controls__button");this.termInput.addEventListener("keyup",this.checkForEnter),t.addEventListener("click",this.handleSearch),this.sortButton.addEventListener("click",this.handleSortClick),this.countButton.addEventListener("click",this.handleCountClick)}handleSearch=t=>{const e=document.querySelector(".search-controls__input").value;let s="mixed";-1!==this.sortText.textContent.indexOf("Popularity")?s="popular":-1!==this.sortText.textContent.indexOf("Newest")&&(s="recent");const n={op:"search_tweets",q:e,result_type:s,count:parseInt(this.countText.textContent.substring(0,3).trim())};axios.get(this.API_BASE_URL,{params:n}).then(this.processResults).catch(this.handleError)};processResults=t=>{let e=JSON.parse(t.data.substring(38,t.data.length)).statuses;console.log(e);const s=document.querySelector(".results").querySelectorAll("*");s&&s.forEach((t=>{t.remove()})),e.forEach((t=>{let e=document.createElement("div");e.classList.add("results__row");let s=document.createElement("div");s.classList.add("results__avatar"),s.style.background=`url(${t.user.profile_image_url})`,s.style.backgroundSize="cover",s.style.backgroundPoisition="center",e.appendChild(s);let n=document.createElement("p");n.classList.add("results__user-name"),n.textContent=t.user.name,e.appendChild(n),document.createElement("p").classList.add("results__at-row")}))};handleError=t=>{console.error("ERROR!",t)};checkForEnter=t=>{"Enter"===t.key&&this.handleSearch()};handleSortClick=t=>{if(this.sortList.classList.toggle("hidden"),this.firstSortOpen){let t=document.querySelectorAll(".sort-menu__item");this.firstSortOpen=!1,t.forEach((t=>{t.addEventListener("click",this.handleSortItemClick)}))}};handleSortItemClick=t=>{this.sortText.textContent!=t.target.textContent&&(this.sortText.textContent=t.target.textContent,document.querySelector(".results__row")&&this.handleSearch()),this.sortList.classList.toggle("hidden")};handleCountClick=t=>{if(this.countList.classList.toggle("hidden"),this.firstCountOpen){let t=document.querySelectorAll(".count-menu__item");this.firstCountOpen=!1,t.forEach((t=>{t.addEventListener("click",this.handleCountItemClick)}))}};handleCountItemClick=t=>{this.countText.textContent!=t.target.textContent&&(this.countText.textContent=t.target.textContent,this.termInput.value&&this.handleSearch()),this.countList.classList.toggle("hidden")}}
//# sourceMappingURL=twitter.js.map